const lib = require("./lib")

describe("absolute", ()=> {
    it ("should return positive if input is positive", ()=>{
        const result = lib.absolute(1)
        expect(result).toBe(1)
    });
    
    it ("should return positive if input is negative", ()=>{
        const result = lib.absolute(-1)
        expect(result).toBe(1)
    });
    
    it ("should return zero if input is zero", ()=>{
        const result = lib.absolute(0)
        expect(result).toBe(0)
    });
})

describe("getCurrencies", ()=>{
    it("should return supported currencies", ()=> {
        const result = lib.getCurrencies()
        expect(result).toEqual(expect.arrayContaining(["NGN", "USD", "EUR"]))
    })
});

describe("getProduct", ()=> {
    it("should return the product price", ()=> {
        const result = lib.getPrice(1)
        expect(result).toMatchObject({id: 1, price: 10})
        expect(result).toHaveProperty("id", 1)
    }
    )
})

describe("registerUser", ()=> {
    it("should throw error if username is falsy", ()=>{
        const argz = [null, undefined, NaN, "", 0, false]
        argz.forEach(a=> {
            expect(()=>{lib.registerUser(a)}).toThrow()
        })
    });

    it("should return a user object if username is passed", ()=>{
        const result = lib.registerUser("kream");
        expect(result).toMatchObject({username: "kream"})
        expect(result.id).toBeGreaterThan(0);
    })
})